{"version":3,"file":"main.js","sources":["webpack:///main.js"],"sourcesContent":["!function(e){function t(t){for(var n,i,l=t[0],c=t[1],s=t[2],h=0,p=[];h<l.length;h++)i=l[h],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(d&&d(t);p.length;)p.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,l=1;l<r.length;l++){var c=r[l];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={1:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var d=c;o.push([20,2]),r()}({14:function(e,t,r){var n=r(15),a=r(16);\"string\"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,\"\"]]);var o={insert:\"head\",singleton:!1},i=(n(a,o),a.locals?a.locals:{});e.exports=i},16:function(e,t,r){(t=r(17)(!1)).push([e.i,\".game-frame {\\r\\n\\twidth: 100%;\\r\\n\\tmin-width: 1280px;\\r\\n\\tmin-height: 800px;\\r\\n}\\r\\n\\r\\nhtml,\\r\\nbody,\\r\\n#root,\\r\\n#container {\\r\\n\\theight: 100%;\\r\\n}\\r\\n\\r\\n#container {\\r\\n\\tdisplay: flex;\\r\\n\\tflex-direction: column;\\r\\n}\\r\\n\\r\\n#file {\\r\\n\\tdisplay: none;\\r\\n}\\r\\n\\r\\n#header {\\r\\n\\tpadding: 0.4rem;\\r\\n\\twhite-space: nowrap;\\r\\n}\\r\\n\\r\\n#game-container {\\r\\n\\tmargin-top: 0.4rem;\\r\\n\\tflex: 10;\\r\\n\\toverflow: hidden;\\r\\n}\\r\\n\\r\\n#game-frame {\\r\\n\\twidth: 100%;\\r\\n\\theight: 100%;\\r\\n}\\r\\n\",\"\"]),e.exports=t},20:function(e,t,r){\"use strict\";r.r(t);var n=r(0),a=r(5),o=r(6),i=r.n(o),l=r(9),c=(r(14),function(e,t,r,n){var a,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i});let s=class extends n.Component{renderGame(){return n.createElement(\"iframe\",{id:\"game-frame\",src:\"game.html\",frameBorder:\"0\"})}renderInfo(){const{appState:e}=this.props;return n.createElement(\"div\",{className:\"container grid-sm panel\"},n.createElement(\"div\",{className:\"panel-header\"},n.createElement(\"div\",{className:\"panel-title h5\"},\"TagPro VCR\")),n.createElement(\"div\",{className:\"panel-body\"},n.createElement(\"h6\",null,\"Usage\"),n.createElement(\"ol\",null,n.createElement(\"li\",null,\"Install the userscript:\",\" \",n.createElement(\"a\",{href:\"https://keratagpro.github.io/tagpro-vcr/tagpro-vcr.user.js\"},\"tagpro-vcr.user.js\"),\".\"),n.createElement(\"li\",null,\"Play a game of \",n.createElement(\"a\",{href:\"http://tagpro.gg\"},\"TagPro\"),\".\"),n.createElement(\"li\",null,\"Upload the recorded game here (\",this.renderUploadLabel(),\") and click\",\" \",this.renderStartButton(),\".\")),n.createElement(\"h6\",null,\"Notes\"),n.createElement(\"ul\",null,n.createElement(\"li\",null,\"To test your TagPro userscripts here, add this @include:\",n.createElement(\"br\",null),n.createElement(\"code\",null,\"// @include https://keratagpro.github.io/tagpro-vcr/game.html\")),n.createElement(\"li\",null,'The game is running in \"spectator\"-mode, so you can press ',n.createElement(\"code\",null,\"C\"),\" to center the view,\",n.createElement(\"code\",null,\"+\"),\"/\",n.createElement(\"code\",null,\"-\"),\" to zoom in/out etc. (see\",\" \",n.createElement(\"a\",{href:\"https://www.reddit.com/r/TagPro/wiki/gameplay#wiki_spectator\"},\"wiki\"),\").\"))))}renderUploadLabel(e){return n.createElement(\"label\",{htmlFor:\"file\",className:\"btn btn-link\"},n.createElement(\"i\",{className:\"icon icon-upload\"}),\" \",e||\"Upload recording\")}renderStartButton(){const{appState:e}=this.props;return n.createElement(\"button\",{className:i()(\"btn btn-success\",{disabled:e.started||!e.recording}),onClick:e.handleStart},\"Start\")}renderStopButton(){const{appState:e}=this.props;return n.createElement(\"button\",{className:i()(\"btn btn-error\",{disabled:!e.started}),onClick:e.handleStop},\"Stop\")}render(){const{appState:e}=this.props,t=i()(\"form-icon\",\"icon\",{loading:e.fetching,\"icon-check\":e.recordingURL&&!e.fetching&&!0===e.urlIsValid,\"icon-stop\":e.recordingURL&&!1===e.urlIsValid});return n.createElement(\"div\",{id:\"container\"},n.createElement(\"header\",{id:\"header\",className:\"navbar\"},n.createElement(\"section\",{className:\"navbar-section\"},n.createElement(\"span\",null,\"TagPro VCR\")),n.createElement(\"section\",{className:\"navbar-center\"},n.createElement(\"div\",{className:\"form-horizontal\"},this.renderUploadLabel(e.recordingName),n.createElement(\"span\",null,\" or \"),n.createElement(\"div\",{className:i()(\"input-group input-inline\",{\"has-icon-right\":!!e.recordingURL})},n.createElement(\"input\",{className:\"form-input\",type:\"text\",value:e.recordingURL,onChange:e.handleUrlChange,placeholder:\"Fetch from URL (http://...)\"}),e.recordingURL&&n.createElement(\"i\",{className:t})),n.createElement(\"input\",{id:\"file\",type:\"file\",accept:\".ndjson,.jsonl\",onChange:e.handleFileSelect}),\" \",this.renderStartButton(),\" \",this.renderStopButton())),n.createElement(\"section\",{className:\"navbar-section\"},n.createElement(\"a\",{href:\"https://github.com/keratagpro/tagpro-vcr\",className:\"btn\"},\"GitHub\"))),n.createElement(\"div\",{id:\"game-container\"},e.started?this.renderGame():this.renderInfo()))}};s=c([l.a],s);var d=r(1),h=r(4),p=function(e,t,r,n){var a,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i};class u{constructor(){this.recording=localStorage.getItem(\"recording\"),this.recordingName=localStorage.getItem(\"recordingName\"),this.recordingURL=\"\",this.selectedFile=void 0,this.started=!1,this.fetching=!1,this.urlIsValid=void 0;const e=this.channel=new h.a(\"vcr\");e.on(\"request-recording\",()=>{e.emit(\"recording\",this.recording.split(\"\\n\").filter(e=>e.trim().length>0).map(e=>JSON.parse(e)))}),Object(d.n)(()=>this.selectedFile,e=>{if(!e)return this.recordingName=void 0,void(this.recording=void 0);const t=new FileReader;t.addEventListener(\"load\",()=>{this.recordingName=e.name,this.recording=t.result}),t.readAsText(e)}),Object(d.n)(()=>this.recordingURL,e=>{this.recordingURL&&(this.fetching=!0,fetch(e).then(e=>{if(e.ok)return e.text();throw e}).then(e=>{this.recording=e,this.fetching=!1,this.urlIsValid=!0}).catch(e=>{this.recording=void 0,this.fetching=!1,this.urlIsValid=!1}))},{delay:1e3}),Object(d.n)(()=>this.recording,m(this,\"recording\")),Object(d.n)(()=>this.recordingName,m(this,\"recordingName\"))}handleFileSelect(e){this.recordingURL=\"\",this.selectedFile=e.target.files[0]}handleUrlChange(e){this.recordingURL=e.target.value,this.selectedFile=void 0,this.urlIsValid=void 0,this.fetching=!1}handleStart(){this.recording&&(this.started=!0)}handleStop(){this.started=!1}}function m(e,t){return function(){e[t]?localStorage.setItem(t,String(e[t])):localStorage.removeItem(t)}}p([d.m],u.prototype,\"recording\",void 0),p([d.m],u.prototype,\"recordingName\",void 0),p([d.m],u.prototype,\"recordingURL\",void 0),p([d.m],u.prototype,\"selectedFile\",void 0),p([d.m],u.prototype,\"started\",void 0),p([d.m],u.prototype,\"fetching\",void 0),p([d.m],u.prototype,\"urlIsValid\",void 0),p([d.f.bound],u.prototype,\"handleFileSelect\",null),p([d.f.bound],u.prototype,\"handleUrlChange\",null),p([d.f.bound],u.prototype,\"handleStart\",null),p([d.f.bound],u.prototype,\"handleStop\",null);const g=new u;Object(a.render)(n.createElement(s,{appState:g}),document.getElementById(\"root\"))},4:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return o}));var n=r(3),a=r.n(n);class o extends BroadcastChannel{constructor(e){super(e);const t=this.events=new a.a;this.addEventListener(\"message\",e=>{const[r,...n]=e.data;t.emit(r,...n)})}on(e,t){this.events.on(e,t)}emit(e,t){this.postMessage([e,t])}}}});"],"mappings":"AAAA","sourceRoot":""}